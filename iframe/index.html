<!doctype html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>扣子AI电路设计助手</title>
		<link rel="stylesheet" href="/iframe/styles.css" />
	</head>
	<body>
		<div class="container">
			<!-- 顶部导航栏 -->
			<header class="header">
				<div class="header-left">
					<div class="logo">
						<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="12" cy="12" r="10" fill="currentColor" opacity="0.2" />
							<path
								d="M12 6C8.69 6 6 8.69 6 12C6 15.31 8.69 18 12 18C15.31 18 18 15.31 18 12C18 8.69 15.31 6 12 6ZM14 11H16V13H14V11ZM8 11H10V13H8V11Z"
								fill="currentColor"
							/>
						</svg>
						<span class="logo-text">扣子AI</span>
					</div>
					<div class="status-indicator" id="statusIndicator">
						<div class="status-dot offline"></div>
						<span class="status-text">未连接</span>
					</div>
				</div>
				<div class="header-right">
					<button class="icon-button" id="settingsBtn" title="设置">
						<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path
								d="M19.14 12.94C19.14 12.78 19.14 12.61 19.14 12.45C19.14 12.29 19.14 12.12 19.14 11.96L21.48 10.18C21.69 10.02 21.75 9.72 21.61 9.49L19.39 5.67C19.25 5.44 18.98 5.35 18.73 5.43L16.02 6.53C15.54 6.17 15.03 5.87 14.5 5.63L14.12 2.73C14.08 2.47 13.86 2.28 13.6 2.28H9.18C8.92 2.28 8.7 2.47 8.66 2.73L8.28 5.63C7.75 5.87 7.24 6.17 6.76 6.53L4.05 5.43C3.8 5.35 3.53 5.44 3.39 5.67L1.17 9.49C1.03 9.72 1.09 10.02 1.3 10.18L3.64 11.96C3.64 12.12 3.64 12.29 3.64 12.45C3.64 12.61 3.64 12.78 3.64 12.94L1.3 14.72C1.09 14.88 1.03 15.18 1.17 15.41L3.39 19.23C3.53 19.46 3.8 19.55 4.05 19.47L6.76 18.37C7.24 18.73 7.75 19.03 8.28 19.27L8.66 22.17C8.7 22.43 8.92 22.62 9.18 22.62H13.6C13.86 22.62 14.08 22.43 14.12 22.17L14.5 19.27C15.03 19.03 15.54 18.73 16.02 18.37L18.73 19.47C18.98 19.55 19.25 19.46 19.39 19.23L21.61 15.41C21.75 15.18 21.69 14.88 21.48 14.72L19.14 12.94ZM11.39 15.54C9.87 15.54 8.64 14.31 8.64 12.79C8.64 11.27 9.87 10.04 11.39 10.04C12.91 10.04 14.14 11.27 14.14 12.79C14.14 14.31 12.91 15.54 11.39 15.54Z"
								fill="currentColor"
							/>
						</svg>
					</button>
					<button class="icon-button" id="clearBtn" title="清空对话">
						<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path
								d="M16 9V19H8V9H16ZM14.5 3H9.5L8.5 4H5V6H19V4H15.5L14.5 3ZM18 7H6V19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7Z"
								fill="currentColor"
							/>
						</svg>
					</button>
				</div>
			</header>

			<!-- 对话历史区域 -->
			<main class="chat-container">
				<div class="chat-messages" id="chatMessages">
					<!-- 欢迎消息 -->
					<div class="message message-assistant">
						<div class="message-avatar">
							<svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
								<circle cx="12" cy="12" r="10" fill="currentColor" opacity="0.2" />
								<path
									d="M12 6C8.69 6 6 8.69 6 12C6 15.31 8.69 18 12 18C15.31 18 18 15.31 18 12C18 8.69 15.31 6 12 6ZM14 11H16V13H14V11ZM8 11H10V13H8V11Z"
									fill="currentColor"
								/>
							</svg>
						</div>
						<div class="message-content">
							<div class="message-text">你好!我是扣子AI电路设计助手。我可以帮您通过自然语言在嘉立创EDA中完成电路设计任务。</div>
							<div class="message-suggestions">
								<div class="suggestion-item">📝 创建新项目</div>
								<div class="suggestion-item">🔍 搜索器件</div>
								<div class="suggestion-item">⚡ 添加器件</div>
							</div>
						</div>
					</div>
				</div>
			</main>

			<!-- 输入区域 -->
			<footer class="input-area">
				<div class="input-wrapper">
					<textarea class="input-textarea" id="messageInput" placeholder="请输入您的电路设计需求..." rows="1"></textarea>
					<button class="send-button" id="sendBtn" disabled>
						<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2.01 21L23 12L2.01 3L2 10L15 12L2 14L2.01 21Z" fill="currentColor" />
						</svg>
					</button>
				</div>
				<div class="input-hint">按 Enter 发送, Shift + Enter 换行</div>
			</footer>
		</div>

		<!-- 设置弹窗 -->
		<div class="modal-overlay" id="settingsModal">
			<div class="modal">
				<div class="modal-header">
					<h2 class="modal-title">插件设置</h2>
					<button class="modal-close" id="closeSettings">
						<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path
								d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 11.41L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L14.41 12.41L19 6.41Z"
								fill="currentColor"
							/>
						</svg>
					</button>
				</div>
				<div class="modal-body">
					<div class="form-group">
						<label class="form-label">API端点</label>
						<input type="text" class="form-input" id="apiEndpoint" placeholder="https://api.coze.cn" value="https://api.coze.cn" />
					</div>
					<div class="form-group">
						<label class="form-label">API Token</label>
						<input
							type="password"
							class="form-input"
							id="apiToken"
							placeholder="请输入扣子API Token"
							value="pat_p7S4IhRA2aAeibBRuoUjITDuu1NokQrNqKnqLcYpZjjKYgucwasw89y5Vu8djmyw"
						/>
					</div>
					<div class="form-group">
						<label class="form-label">Bot ID</label>
						<input type="text" class="form-input" id="botId" value="7596297169787846666" placeholder="请输入Bot ID" />
					</div>
					<div class="form-group">
						<label class="form-label">对话历史保留条数</label>
						<input type="number" class="form-input" id="maxHistorySize" value="50" min="10" max="200" />
					</div>
				</div>
				<div class="modal-footer">
					<button class="button button-secondary" id="resetSettings">重置默认</button>
					<button class="button button-primary" id="saveSettings">保存设置</button>
				</div>
			</div>
		</div>

		<script src="/iframe/app.js"></script>
	</body>
</html>
